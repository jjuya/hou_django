{% extends 'base/base.html' %}

{% block content %}

    <div class="container">
      <div class="title">
        <h1>{{board.title}}</h1>
      </div>
    </div>

    <!-- list create form -->
    <div class="container">
      <form id="new_list" class="">
        <div class="row form-group">
          <div class="col-offset-1 col-8">
            <input type="text" class="form-control" id="new_list_title" maxlength="20" placeholder="List title" required>
          </div>

          <div class="col-offset-1 col-1">
            <button type="submit" class="btn btn-default">Save</button>
          </div>
        </div>
      </form>
    </div>

    {% include 'bookmark/_bookmark_new.html' with lists=lists %}

    <div class="container" id="lists">
      {% for list in lists %}
        {% include 'list/_list.html' with list=list %}
      {% endfor %}
    </div>

    <script type="text/javascript">
      var newListForm = $('#new_list');

      newListForm.on('submit', function(event) {
        event.preventDefault();

        $.ajax({
          url: "{% url 'list_new' %}",
          type: "POST",
          dataType: "json",
          data: {
            "title": $("#new_list_title").val(),
					  "board_id": "{{ board.id }}",
            "csrfmiddlewaretoken": "{{ csrf_token }}"
          },
          success: function(data){
            $('#lists').append(data);
            $("#new_list_title").val('');
            alert("Success : List create");
          },
          error:function(){
            alert("Error : List create");
          }
        });
      });

      $(document).ready(function () {
        $(".active_new_bookmark_form").on("click", function () {
          var listId = $(this).data('id');
          console.log(listId);
          $("#new_bookmark_modal #id_list").val(listId);
        });
      });
    </script>
{% endblock %}
